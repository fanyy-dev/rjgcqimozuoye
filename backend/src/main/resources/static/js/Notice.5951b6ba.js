"use strict";(self["webpackChunkvue_template"]=self["webpackChunkvue_template"]||[]).push([[38],{654:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("el-card",{staticClass:"box-table"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchForm}},[e("el-form-item",{attrs:{label:"公告内容"}},[e("el-input",{attrs:{placeholder:"请输入公告内容"},model:{value:t.searchForm.content,callback:function(e){t.$set(t.searchForm,"content",e)},expression:"searchForm.content"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),e("el-button",{on:{click:t.handleAdd}},[t._v("新增")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"",size:"small"}},[e("el-table-column",{attrs:{align:"center",label:"ID",prop:"id"}}),e("el-table-column",{attrs:{align:"center",label:"标题",prop:"title","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{align:"center",label:"发布时间",prop:"createTime"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("编辑")]),e("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(e){return t.deleteCofirm(a.row)}}},[e("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),e("el-pagination",{staticClass:"page-box",attrs:{background:"","current-page":t.pageNum,"page-sizes":[10,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{"label-position":"left",model:t.dialogForm,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{attrs:{placeholder:"请输入公告标题",autocomplete:"off"},model:{value:t.dialogForm.title,callback:function(e){t.$set(t.dialogForm,"title",e)},expression:"dialogForm.title"}})],1)],1),e("el-form",{attrs:{"label-position":"left",model:t.dialogForm,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"公告内容"}},[e("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入公告内容",autocomplete:"off"},model:{value:t.dialogForm.content,callback:function(e){t.$set(t.dialogForm,"content",e)},expression:"dialogForm.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.dialogConfirm}},[t._v("确 定")])],1)],1)],1)},i=[],o=a(4166),r={data(){return{list:null,listLoading:!0,pageSize:10,pageNum:1,total:0,searchForm:{},dialogTitle:"添加",dialogFormVisible:!1,dialogForm:{}}},created(){this.fetchData()},methods:{handleSizeChange(t){this.pageSize=t,this.fetchData()},handleCurrentChange(t){this.pageNum=t,this.fetchData()},handleSearch(){this.fetchData()},async fetchData(){this.listLoading=!0;let t=await(0,o.R6)(this.pageNum,this.pageSize,this.searchForm);this.list=t.data.records,this.total=t.data.total,this.listLoading=!1},handleAdd(){this.dialogTitle="新增",this.dialogFormVisible=!0,this.dialogForm={}},handleEdit(t){this.dialogTitle="修改",this.dialogFormVisible=!0,this.dialogForm={...t}},async dialogConfirm(){let t=null;t="新增"==this.dialogTitle?await(0,o.OP)(this.dialogForm):await(0,o.qE)(this.dialogForm),t.flag&&(this.dialogFormVisible=!1),this.$message({message:t.message,type:t.flag?"success":"error"}),this.fetchData()},async deleteCofirm(t){this.pageNum=1;const e=await(0,o.xM)(t.id);this.$message({message:e.message,type:e.flag?"success":"error"}),this.fetchData()}}},n=r,s=a(1001),c=(0,s.Z)(n,l,i,!1,null,"4b7145da",null),d=c.exports},4166:function(t,e,a){a.d(e,{OP:function(){return n},R6:function(){return i},_g:function(){return r},lz:function(){return o},qE:function(){return s},xM:function(){return c}});var l=a(60);const i=(t,e,a)=>(0,l.Z)({url:`/notice/search/${t}/${e}`,method:"get",params:a}),o=()=>(0,l.Z)({url:"/notice/getTop5",method:"get"}),r=t=>(0,l.Z)({url:"/notice/"+t,method:"get"}),n=t=>(0,l.Z)({url:"/notice",method:"post",data:t}),s=t=>(0,l.Z)({url:"/notice",method:"put",data:t}),c=t=>(0,l.Z)({url:`/notice/${t}`,method:"delete"})}}]);
//# sourceMappingURL=Notice.5951b6ba.js.map