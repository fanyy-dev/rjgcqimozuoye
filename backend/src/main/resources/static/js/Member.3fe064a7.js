"use strict";(self["webpackChunkvue_template"]=self["webpackChunkvue_template"]||[]).push([[459],{7283:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-table"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[t("el-form-item",{attrs:{label:"账号"}},[t("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),t("el-form-item",{attrs:{label:"姓名"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("el-form-item",{attrs:{label:"手机"}},[t("el-input",{attrs:{placeholder:"请输入手机"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1),t("el-form-item",{attrs:{label:"身份证"}},[t("el-input",{attrs:{placeholder:"请输入身份证"},model:{value:e.searchForm.idcard,callback:function(t){e.$set(e.searchForm,"idcard",t)},expression:"searchForm.idcard"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),t("el-button",{on:{click:e.handleAdd}},[e._v("新增")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"",size:"small"}},[t("el-table-column",{attrs:{align:"center",label:"ID",prop:"id"}}),t("el-table-column",{attrs:{align:"center",label:"账号",prop:"username"}}),t("el-table-column",{attrs:{align:"center",label:"姓名",prop:"name"}}),t("el-table-column",{attrs:{align:"center",label:"性别",prop:"gender"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.gender?t("el-tag",{attrs:{type:"success"}},[e._v("男")]):t("el-tag",{attrs:{type:"danger"}},[e._v("女")])]}}])}),t("el-table-column",{attrs:{align:"center",label:"手机",prop:"phone"}}),t("el-table-column",{attrs:{align:"center",label:"身份证",prop:"idcard"}}),t("el-table-column",{attrs:{align:"center",label:"头像",prop:"head"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.$baseFileUrl+a.row.head,fit:"fit"}})]}}])}),t("el-table-column",{attrs:{align:"center",label:"注册时间",prop:"createTime"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(t){return e.deleteCofirm(a.row)}}},[t("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-pagination",{staticClass:"page-box",attrs:{background:"","current-page":e.pageNum,"page-sizes":[10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{"label-position":"left",model:e.dialogForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"账号"}},[t("el-input",{attrs:{placeholder:"请输入账号",autocomplete:"off"},model:{value:e.dialogForm.username,callback:function(t){e.$set(e.dialogForm,"username",t)},expression:"dialogForm.username"}})],1),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.dialogForm.password,callback:function(t){e.$set(e.dialogForm,"password",t)},expression:"dialogForm.password"}})],1),t("el-form-item",{attrs:{label:"姓名"}},[t("el-input",{attrs:{placeholder:"请输入姓名",autocomplete:"off"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogForm.gender,callback:function(t){e.$set(e.dialogForm,"gender",t)},expression:"dialogForm.gender"}},e._l(e.genderOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"手机"}},[t("el-input",{attrs:{placeholder:"请输入手机",autocomplete:"off"},model:{value:e.dialogForm.phone,callback:function(t){e.$set(e.dialogForm,"phone",t)},expression:"dialogForm.phone"}})],1),t("el-form-item",{attrs:{label:"身份证"}},[t("el-input",{attrs:{placeholder:"请输入身份证",autocomplete:"off"},model:{value:e.dialogForm.idcard,callback:function(t){e.$set(e.dialogForm,"idcard",t)},expression:"dialogForm.idcard"}})],1),t("el-form-item",{attrs:{label:"头像"}},[t("el-upload",{staticClass:"upload-demo",attrs:{name:"avatar",action:"#","http-request":e.uploadHeadFile,"file-list":e.fileList,"list-type":"picture"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfirm}},[e._v("确 定")])],1)],1)],1)},o=[],r=a(8802),i=a(60),s={data(){return{list:null,listLoading:!0,pageSize:10,pageNum:1,total:0,searchForm:{},dialogTitle:"添加",dialogFormVisible:!1,dialogForm:{},genderOptions:[{label:"男",value:1},{label:"女",value:2}],fileList:[]}},created(){this.fetchData()},methods:{handleSizeChange(e){this.pageSize=e,this.fetchData()},handleCurrentChange(e){this.pageNum=e,this.fetchData()},handleSearch(){this.fetchData()},async fetchData(){this.listLoading=!0;let e=await(0,r.RJ)(this.pageNum,this.pageSize,this.searchForm);this.list=e.data.records,this.total=e.data.total,this.listLoading=!1},handleAdd(){this.dialogTitle="新增",this.dialogFormVisible=!0,this.dialogForm={gender:1},this.fileList=[]},handleEdit(e){this.dialogTitle="修改",this.dialogFormVisible=!0,this.dialogForm={...e},this.fileList=[{name:this.dialogForm.head,url:this.$baseFileUrl+this.dialogForm.head}]},async dialogConfirm(){let e=null;e="新增"==this.dialogTitle?await(0,r.EL)(this.dialogForm):await(0,r.EU)(this.dialogForm),e.flag&&(this.dialogFormVisible=!1),this.$message({message:e.message,type:e.flag?"success":"error"}),this.fetchData()},async deleteCofirm(e){this.pageNum=1;const t=await(0,r.K0)(e.id);this.$message({message:t.message,type:t.flag?"success":"error"}),this.fetchData()},uploadHeadFile(e){let t=e.file;const a=new FormData;a.append("photo",t),i.Z.post("/file/uploadPhoto",a,"form").then((e=>{this.dialogForm.head=e.data.filename,this.fileList=[{name:this.dialogForm.head,url:this.$baseFileUrl+this.dialogForm.head}]}))}}},n=s,d=a(1001),m=(0,d.Z)(n,l,o,!1,null,"32c648b8",null),c=m.exports},8802:function(e,t,a){a.d(t,{EL:function(){return i},EU:function(){return s},K0:function(){return n},RJ:function(){return o},bp:function(){return r}});var l=a(60);const o=(e,t,a)=>(0,l.Z)({url:`/member/search/${e}/${t}`,method:"get",params:a}),r=()=>(0,l.Z)({url:"/member",method:"get"}),i=e=>(0,l.Z)({url:"/member",method:"post",data:e}),s=e=>(0,l.Z)({url:"/member",method:"put",data:e}),n=e=>(0,l.Z)({url:`/member/${e}`,method:"delete"})}}]);
//# sourceMappingURL=Member.3fe064a7.js.map